(function(){"use strict";var a,b;a={toString:function(){return"Bacon"}},a.version="<version>",b=("undefined"!=typeof global&&null!==global?global:this).Error;var c,d,e={}.hasOwnProperty;d={indexOf:Array.prototype.indexOf?function(a,b){return a.indexOf(b)}:function(a,b){var c,d,e,f;for(c=e=0,f=a.length;f>e;c=++e)if(d=a[c],b===d)return c;return-1},indexWhere:function(a,b){var c,d,e,f;for(c=e=0,f=a.length;f>e;c=++e)if(d=a[c],b(d))return c;return-1},head:function(a){return a[0]},always:function(a){return function(){return a}},negate:function(a){return function(b){return!a(b)}},empty:function(a){return 0===a.length},tail:function(a){return a.slice(1,a.length)},filter:function(a,b){var c,d,e,f;for(c=[],e=0,f=b.length;f>e;e++)d=b[e],a(d)&&c.push(d);return c},map:function(a,b){var c,d,e,f;for(f=[],d=0,e=b.length;e>d;d++)c=b[d],f.push(a(c));return f},each:function(a,b){var c,d;for(c in a)d=a[c],b(c,d);return void 0},toArray:function(a){return U(a)?a:[a]},contains:function(a,b){return-1!==d.indexOf(a,b)},id:function(a){return a},last:function(a){return a[a.length-1]},all:function(a,b){var c,e,f;for(null==b&&(b=d.id),e=0,f=a.length;f>e;e++)if(c=a[e],!b(c))return!1;return!0},any:function(a,b){var c,e,f;for(null==b&&(b=d.id),e=0,f=a.length;f>e;e++)if(c=a[e],b(c))return!0;return!1},without:function(a,b){return d.filter(function(b){return b!==a},b)},remove:function(a,b){var c;return c=d.indexOf(b,a),c>=0?b.splice(c,1):void 0},fold:function(a,b,c){var d,e,f;for(e=0,f=a.length;f>e;e++)d=a[e],b=c(b,d);return b},flatMap:function(a,b){return d.fold(b,[],function(b,c){return b.concat(a(c))})},cached:function(a){var b;return b=A,function(){return b===A&&(b=a(),a=void 0),b}},isFunction:function(a){return"function"==typeof a},toString:function(a){var b,f,g,h;try{return c++,null==a?"undefined":d.isFunction(a)?"function":U(a)?c>5?"[..]":"["+d.map(d.toString,a).toString()+"]":null!=(null!=a?a.toString:void 0)&&a.toString!==Object.prototype.toString?a.toString():"object"==typeof a?c>5?"{..}":(f=function(){var c;c=[];for(g in a)e.call(a,g)&&(h=function(){try{return a[g]}catch(c){return b=c}}(),c.push(d.toString(g)+":"+d.toString(h)));return c}(),"{"+f+"}"):a}finally{c--}}},c=0,a._=d;var f;f=function(){var b,c,e,f,g,h,i,j,k,l,m,n,o,p;return l=void 0,m=[],n={},c=[],e=0,b=function(a){return l?c.push(a):a()},o=function(a,b){var c;return l?(c=n[a.id],null==c?(c=n[a.id]=[b],m.push(a)):c.push(b)):b()},g=function(){for(;m.length>0;)i(0);return void 0},i=function(a){var b,c,d,e,f,g;for(c=m[a],d=c.id,e=n[d],m.splice(a,1),delete n[d],h(c),f=0,g=e.length;g>f;f++)(b=e[f])();return void 0},h=function(a){var b,c,e,f,g;for(c=a.internalDeps(),f=0,g=c.length;g>f;f++)b=c[f],h(b),n[b.id]&&(e=d.indexOf(m,b),i(e));return void 0},k=function(a,b,d,f){var h,i;if(l)return d.apply(b,f);l=a;try{i=d.apply(b,f),g()}finally{for(l=void 0;e<c.length;)h=c[e],e++,h();e=0,c=[]}return i},f=function(){return l?l.id:void 0},p=function(c,d){var e,f,g,h;return h=!1,f=!1,e=function(){return f=!0},g=function(){return h=!0,e()},e=c.dispatcher.subscribe(function(c){return b(function(){var b;return h||(b=d(c),b!==a.noMore)?void 0:g()})}),f&&e(),g},j=function(){return m.length>0},{whenDoneWith:o,hasWaiters:j,inTransaction:k,currentEventId:f,wrappedSubscribe:p,afterTransaction:b}}();var g,h,i,e={}.hasOwnProperty,j=function(a,b){function c(){this.constructor=a}for(var d in b)e.call(b,d)&&(a[d]=b[d]);return c.prototype=b.prototype,a.prototype=new c,a.__super__=b.prototype,a};i=function(){function a(a,b,c){this.obs=a,this.sync=b,this.lazy=null!=c?c:!1,this.queue=[]}return a.prototype.subscribe=function(a){return this.obs.dispatcher.subscribe(a)},a.prototype.toString=function(){return this.obs.toString()},a.prototype.markEnded=function(){return this.ended=!0},a.prototype.consume=function(){return this.lazy?{value:d.always(this.queue[0])}:this.queue[0]},a.prototype.push=function(a){return this.queue=[a]},a.prototype.mayHave=function(){return!0},a.prototype.hasAtLeast=function(){return this.queue.length},a.prototype.flatten=!0,a}(),h=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}return j(b,a),b.prototype.consume=function(){return this.queue.shift()},b.prototype.push=function(a){return this.queue.push(a)},b.prototype.mayHave=function(a){return!this.ended||this.queue.length>=a},b.prototype.hasAtLeast=function(a){return this.queue.length>=a},b.prototype.flatten=!1,b}(i),g=function(a){function b(a){b.__super__.constructor.call(this,a,!0)}return j(b,a),b.prototype.consume=function(){var a;return a=this.queue,this.queue=[],{value:function(){return a}}},b.prototype.push=function(a){return this.queue.push(a.value())},b.prototype.hasAtLeast=function(){return!0},b}(i),i.isTrigger=function(a){return a instanceof i?a.sync:a instanceof hb},i.fromObservable=function(a){return a instanceof i?a:a instanceof ib?new i(a,!1):new h(a,!0)};var k,l,m,n,o=[].slice;k=function(){function a(a,b,c){this.context=a,this.method=b,this.args=c,this.cached=void 0}return a.prototype.deps=function(){return this.cached||(this.cached=m([this.context].concat(this.args)))},a.prototype.apply=function(a){return a.desc=this,a},a.prototype.toString=function(){return d.toString(this.context)+"."+d.toString(this.method)+"("+d.map(d.toString,this.args)+")"},a}(),l=function(){var a,b,c;return b=arguments[0],c=arguments[1],a=3<=arguments.length?o.call(arguments,2):[],(b||c)instanceof k?b||c:new k(b,c,a)},n=function(){var a,b,c;return a=2<=arguments.length?o.call(arguments,0,c=arguments.length-1):(c=0,[]),b=arguments[c++],l.apply(null,a).apply(b)},m=function(a){return U(a)?d.flatMap(m,a):V(a)?[a]:a instanceof i?[a.obs]:[]};var p,q,r,s,t,u,v,w,x,y,z,o=[].slice;z=function(a){return function(){var b,c,d,e;return d=arguments[0],b=2<=arguments.length?o.call(arguments,1):[],"object"==typeof d&&b.length&&(c=d,e=b[0],d=function(){return c[e].apply(c,arguments)},b=b.slice(1)),a.apply(null,[d].concat(o.call(b)))}},s=function(a){return a=Array.prototype.slice.call(a),t.apply(null,a)},u=function(a,b){return function(){var c;return c=1<=arguments.length?o.call(arguments,0):[],a.apply(null,b.concat(c))}},y=function(a){return function(b){return function(c){var e;return null==c?void 0:(e=c[b],d.isFunction(e)?e.apply(c,a):e)}}},w=function(a,b){var c,e;return e=a.slice(1).split("."),c=d.map(y(b),e),function(b){var d,e;for(d=0,e=c.length;e>d;d++)a=c[d],b=a(b);return b}},q=function(a){return"string"==typeof a&&a.length>1&&"."===a.charAt(0)},t=z(function(){var a,b;return b=arguments[0],a=2<=arguments.length?o.call(arguments,1):[],d.isFunction(b)?a.length?u(b,a):b:q(b)?w(b,a):d.always(b)}),r=function(a,b){return t.apply(null,[a].concat(o.call(b)))},p=function(a,b,c,d){var e;return b instanceof ib?(e=b.sampledBy(a,function(a,b){return[a,b]}),d.call(e,function(a){var b,c;return b=a[0],c=a[1],b}).map(function(a){var b,c;return b=a[0],c=a[1]})):(b=r(b,c),d.call(a,b))},v=function(a){var b;return d.isFunction(a)?a:q(a)?(b=x(a),function(a,c){return a[b](c)}):void 0},x=function(a){return a.slice(1)};var A,B,C;B=function(){function a(a){this.value=a}return a.prototype.getOrElse=function(){return this.value},a.prototype.get=function(){return this.value},a.prototype.filter=function(b){return b(this.value)?new a(this.value):A},a.prototype.map=function(b){return new a(b(this.value))},a.prototype.forEach=function(a){return a(this.value)},a.prototype.isDefined=!0,a.prototype.toArray=function(){return[this.value]},a.prototype.inspect=function(){return"Some("+this.value+")"},a.prototype.toString=function(){return this.inspect()},a}(),A={getOrElse:function(a){return a},filter:function(){return A},map:function(){return A},forEach:function(){},isDefined:!1,toArray:function(){return[]},inspect:function(){return"None"},toString:function(){return this.inspect()}},C=function(a){return a instanceof B||a===A?a:new B(a)};var D,E,F;E=0,F=function(){},D=function(){function a(a){this.id=++E,n(a,this),this.initialDesc=this.desc}return a.prototype.subscribe=function(a){return f.wrappedSubscribe(this,a)},a.prototype.subscribeInternal=function(a){return this.dispatcher.subscribe(a)},a.prototype.onValue=function(){var a;return a=s(arguments),this.subscribe(function(b){return b.hasValue()?a(b.value()):void 0})},a.prototype.onValues=function(a){return this.onValue(function(b){return a.apply(null,b)})},a.prototype.onError=function(){var a;return a=s(arguments),this.subscribe(function(b){return b.isError()?a(b.error):void 0})},a.prototype.onEnd=function(){var a;return a=s(arguments),this.subscribe(function(b){return b.isEnd()?a():void 0})},a.prototype.errors=function(){return n(this,"errors",this.filter(function(){return!1}))},a.prototype.name=function(a){return this._name=a,this},a.prototype.withDescription=function(){return l.apply(null,arguments).apply(this)},a.prototype.toString=function(){return this._name?this._name:this.desc.toString()},a.prototype.internalDeps=function(){return this.initialDesc.deps()},a}(),D.prototype.assign=D.prototype.onValue,D.prototype.inspect=D.prototype.toString,a.Observable=D;var G,H,o=[].slice,I=function(a,b){return function(){return a.apply(b,arguments)}};H=function(){var a;return a=1<=arguments.length?o.call(arguments,0):[],new G(a).unsubscribe},G=function(){function a(a){var b,c,d;for(null==a&&(a=[]),this.unsubscribe=I(this.unsubscribe,this),this.unsubscribed=!1,this.subscriptions=[],this.starting=[],c=0,d=a.length;d>c;c++)b=a[c],this.add(b)}return a.prototype.add=function(a){var b,c,e;if(!this.unsubscribed)return b=!1,c=X,this.starting.push(a),e=function(e){return function(){return e.unsubscribed?void 0:(b=!0,e.remove(c),d.remove(a,e.starting))}}(this),c=a(this.unsubscribe,e),this.unsubscribed||b||this.subscriptions.push(c),d.remove(a,this.starting),c},a.prototype.remove=function(a){return this.unsubscribed?void 0:void 0!==d.remove(a,this.subscriptions)?a():void 0},a.prototype.unsubscribe=function(){var a,b,c,d;if(!this.unsubscribed){for(this.unsubscribed=!0,d=this.subscriptions,b=0,c=d.length;c>b;b++)(a=d[b])();return this.subscriptions=[],this.starting=[]}},a.prototype.count=function(){return this.unsubscribed?0:this.subscriptions.length+this.starting.length},a.prototype.empty=function(){return 0===this.count()},a}(),a.CompositeUnsubscribe=G;var J,K,o=[].slice;a.when=function(){var b,c,e,g,h,j,k,m,n,p,q,r,s,t,u,v,w,x,y,z;if(0===arguments.length)return a.never();for(h=arguments.length,u="when: expecting arguments in the form (Observable+,function)+",s=[],n=[],c=0,p=[];h>c;){for(p[c]=arguments[c],p[c+1]=arguments[c+1],m=d.toArray(arguments[c]),b=J(arguments[c+1]),k={f:b,ixs:[]},t=!1,v=0,x=m.length;x>v;v++){for(r=m[v],e=d.indexOf(s,r),t||(t=i.isTrigger(r)),0>e&&(s.push(r),e=s.length-1),z=k.ixs,w=0,y=z.length;y>w;w++)g=z[w],g.index===e&&g.count++;k.ixs.push({index:e,count:1})}m.length>0&&n.push(k),c+=2}return s.length?(s=d.map(i.fromObservable,s),j=d.any(s,function(a){return a.flatten})&&K(d.map(function(a){return a.obs},s)),q=new hb(l.apply(null,[a,"when"].concat(o.call(p))),function(b){var e,g,h,i,k,l,m;return m=[],h=!1,i=function(a){var b,d,e;for(e=a.ixs,b=0,d=e.length;d>b;b++)if(c=e[b],!s[c.index].hasAtLeast(c.count))return!1;return!0},g=function(a){return!a.sync||a.ended},e=function(a){var b,d,e;for(e=a.ixs,b=0,d=e.length;d>b;b++)if(c=e[b],!s[c.index].mayHave(c.count))return!0},k=function(a){return!a.source.flatten},l=function(l){return function(o){var p,r,t;return r=function(){return f.whenDoneWith(q,p)},t=function(){var e,f,g,h,j,l;if(!(m.length>0))return a.more;for(g=a.more,h=m.pop(),j=0,l=n.length;l>j;j++)if(f=n[j],i(f))return e=function(){var a,b,d,e;for(d=f.ixs,e=[],a=0,b=d.length;b>a;a++)c=d[a],e.push(s[c.index].consume());return e}(),g=b(h.e.apply(function(){var a,b;return b=function(){var b,c,d;for(d=[],b=0,c=e.length;c>b;b++)a=e[b],d.push(a.value());return d}(),f.f.apply(f,b)})),m.length&&(m=d.filter(k,m)),g===a.noMore?g:t()},p=function(){var c;return c=t(),h&&(h=!1,(d.all(s,g)||d.all(n,e))&&(c=a.noMore,b(bb()))),c===a.noMore&&o(),c},l.subscribe(function(c){var d;return c.isEnd()?(h=!0,l.markEnded(),r()):c.isError()?d=b(c):(l.push(c),l.sync&&(m.push({source:l,e:c}),j||f.hasWaiters()?r():p())),d===a.noMore&&o(),d||a.more})}},H.apply(null,function(){var a,b,c;for(c=[],a=0,b=s.length;b>a;a++)r=s[a],c.push(l(r));return c}())})):a.never()},K=function(a,b){var c;return null==b&&(b=[]),c=function(a){var e;return d.contains(b,a)?!0:(e=a.internalDeps(),e.length?(b.push(a),d.any(e,c)):(b.push(a),!1))},d.any(a,c)},J=function(a){return d.isFunction(a)?a:d.always(a)};var o=[].slice;a.groupSimultaneous=function(){var b,c,d;return d=1<=arguments.length?o.call(arguments,0):[],1===d.length&&U(d[0])&&(d=d[0]),c=function(){var a,c,e;for(e=[],a=0,c=d.length;c>a;a++)b=d[a],e.push(new g(b));return e}(),n.apply(null,[a,"groupSimultaneous"].concat(o.call(d),[a.when(c,function(){var a;return a=1<=arguments.length?o.call(arguments,0):[]})]))};var L,M,N,O,P,Q,R,S,T,U,V,W,X;X=function(){},W=function(a,b){return b},T=function(a){return a},S=function(a){return a.slice(0)},L=function(a,c){if(!c)throw new b(a)},N=function(a){if(!(a instanceof hb))throw new b("not an EventStream : "+a)},Q=function(a){if(!(a instanceof D))throw new b("not an Observable : "+a)},O=function(){},U=function(a){return a instanceof Array},V=function(a){return a instanceof D},M=function(a){if(!U(a))throw new b("not an array : "+a)},P=function(){},R=function(a){if("string"!=typeof a)throw new b("not a string : "+a)};var Y,Z,$,_,ab,bb,cb,db,eb,fb,e={}.hasOwnProperty,j=function(a,b){function c(){this.constructor=a}for(var d in b)e.call(b,d)&&(a[d]=b[d]);return c.prototype=b.prototype,a.prototype=new c,a.__super__=b.prototype,a};cb=0,$=function(){function a(){this.id=++cb}return a.prototype.isEvent=function(){return!0},a.prototype.isEnd=function(){return!1},a.prototype.isInitial=function(){return!1},a.prototype.isNext=function(){return!1},a.prototype.isError=function(){return!1},a.prototype.hasValue=function(){return!1},a.prototype.filter=function(){return!0},a.prototype.inspect=function(){return this.toString()},a.prototype.log=function(){return this.toString()},a}(),ab=function(a){function b(a,c){b.__super__.constructor.call(this),!c&&d.isFunction(a)||a instanceof b?(this.valueF=a,this.valueInternal=void 0):(this.valueF=void 0,this.valueInternal=a)}return j(b,a),b.prototype.isNext=function(){return!0},b.prototype.hasValue=function(){return!0},b.prototype.value=function(){return this.valueF instanceof b?(this.valueInternal=this.valueF.value(),this.valueF=void 0):this.valueF&&(this.valueInternal=this.valueF(),this.valueF=void 0),this.valueInternal},b.prototype.fmap=function(a){var b,c;return this.valueInternal?(c=this.valueInternal,this.apply(function(){return a(c)})):(b=this,this.apply(function(){return a(b.value())}))},b.prototype.apply=function(a){return new b(a)},b.prototype.filter=function(a){return a(this.value())},b.prototype.toString=function(){return d.toString(this.value())},b.prototype.log=function(){return this.value()},b}($),_=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}return j(b,a),b.prototype.isInitial=function(){return!0},b.prototype.isNext=function(){return!1},b.prototype.apply=function(a){return new b(a)},b.prototype.toNext=function(){return new ab(this)},b}(ab),Y=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}return j(b,a),b.prototype.isEnd=function(){return!0},b.prototype.fmap=function(){return this},b.prototype.apply=function(){return this},b.prototype.toString=function(){return"<end>"},b}($),Z=function(a){function b(a){this.error=a}return j(b,a),b.prototype.isError=function(){return!0},b.prototype.fmap=function(){return this},b.prototype.apply=function(){return this},b.prototype.toString=function(){return"<error> "+d.toString(this.error)},b}($),a.Initial=_,a.Next=ab,a.End=Y,a.Error=Z,db=function(a){return new _(a,!0)},eb=function(a){return new ab(a,!0)},bb=function(){return new Y},fb=function(a){return a instanceof $?a:eb(a)},a.noMore=["<no-more>"],a.more=["<more>"];var gb,I=function(a,b){return function(){return a.apply(b,arguments)}};gb=function(){function b(a,b){this._subscribe=a,this._handleEvent=b,this.subscribe=I(this.subscribe,this),this.handleEvent=I(this.handleEvent,this),this.subscriptions=[],this.queue=[],this.pushing=!1,this.ended=!1,this.prevError=void 0,this.unsubSrc=void 0}return b.prototype.hasSubscribers=function(){return this.subscriptions.length>0},b.prototype.removeSub=function(a){return this.subscriptions=d.without(a,this.subscriptions)},b.prototype.push=function(a){return a.isEnd()&&(this.ended=!0),f.inTransaction(a,this,this.pushIt,[a])},b.prototype.pushToSubscriptions=function(b){var c,d,e,f,g,h;try{for(f=this.subscriptions,g=0,h=f.length;h>g;g++)e=f[g],d=e.sink(b),(d===a.noMore||b.isEnd())&&this.removeSub(e);return!0}catch(i){throw c=i,this.pushing=!1,this.queue=[],c}},b.prototype.pushIt=function(b){if(this.pushing)return this.queue.push(b),a.more;if(b!==this.prevError){for(b.isError()&&(this.prevError=b),this.pushing=!0,this.pushToSubscriptions(b),this.pushing=!1;this.queue.length;)b=this.queue.shift(),this.push(b);return this.hasSubscribers()?a.more:(this.unsubscribeFromSource(),a.noMore)}},b.prototype.handleEvent=function(a){return this._handleEvent?this._handleEvent(a):this.push(a)},b.prototype.unsubscribeFromSource=function(){return this.unsubSrc&&this.unsubSrc(),this.unsubSrc=void 0},b.prototype.subscribe=function(a){var b;return this.ended?(a(bb()),X):(b={sink:a},this.subscriptions.push(b),1===this.subscriptions.length&&(this.unsubSrc=this._subscribe(this.handleEvent)),function(a){return function(){return a.removeSub(b),a.hasSubscribers()?void 0:a.unsubscribeFromSource()}}(this))},b}();var hb,e={}.hasOwnProperty,j=function(a,b){function c(){this.constructor=a}for(var d in b)e.call(b,d)&&(a[d]=b[d]);return c.prototype=b.prototype,a.prototype=new c,a.__super__=b.prototype,a};hb=function(b){function c(a,b,e){d.isFunction(a)&&(e=b,b=a,a=[]),c.__super__.constructor.call(this,a),this.dispatcher=new gb(b,e),F(this)}return j(c,b),c.prototype.toProperty=function(b){var c,d;return d=0===arguments.length?A:C(function(){return b}),c=this.dispatcher,new ib(l(this,"toProperty",b),function(b){var e,f,g,h;return e=!1,h=X,f=a.more,g=function(){return e?void 0:d.forEach(function(c){return e=!0,f=b(new _(c)),f===a.noMore?(h(),h=X):void 0})},h=c.subscribe(function(c){return c.hasValue()?e&&c.isInitial()?a.more:(c.isInitial()||g(),e=!0,d=new B(c),b(c)):(c.isEnd()&&(f=g()),f!==a.noMore?b(c):void 0)}),g(),h})},c.prototype.toEventStream=function(){return this},c.prototype.startWith=function(b){return n(this,"startWith",b,a.once(b).concat(this))},c.prototype.withHandler=function(a){return new c(l(this,"withHandler",a),this.dispatcher.subscribe,a)},c}(D),a.EventStream=hb;var ib,jb,I=function(a,b){return function(){return a.apply(b,arguments)}},e={}.hasOwnProperty,j=function(a,b){function c(){this.constructor=a}for(var d in b)e.call(b,d)&&(a[d]=b[d]);return c.prototype=b.prototype,a.prototype=new c,a.__super__=b.prototype,a};jb=function(b){function c(a,b,d){this.property=a,this.subscribe=I(this.subscribe,this),c.__super__.constructor.call(this,b,d),this.current=A,this.currentValueRootId=void 0,this.propertyEnded=!1}return j(c,b),c.prototype.push=function(a){return a.isEnd()&&(this.propertyEnded=!0),a.hasValue()&&(this.current=new B(a),this.currentValueRootId=f.currentEventId()),c.__super__.push.call(this,a)},c.prototype.maybeSubSource=function(b,c){return c===a.noMore?X:this.propertyEnded?(b(bb()),X):gb.prototype.subscribe.call(this,b)},c.prototype.subscribe=function(b){var c,d,e,g;return d=!1,e=a.more,this.current.isDefined&&(this.hasSubscribers()||this.propertyEnded)?(c=f.currentEventId(),g=this.currentValueRootId,!this.propertyEnded&&g&&c&&c!==g?(f.whenDoneWith(this.property,function(a){return function(){return a.currentValueRootId===g?b(db(a.current.get().value())):void 0}}(this)),this.maybeSubSource(b,e)):(f.inTransaction(void 0,this,function(){return e=b(db(this.current.get().value()))},[]),this.maybeSubSource(b,e))):this.maybeSubSource(b,e)},c}(gb),ib=function(a){function b(a,c,e){d.isFunction(a)&&(e=c,c=a,a=[]),b.__super__.constructor.call(this,a),this.dispatcher=new jb(this,c,e),F(this)}return j(b,a),b.prototype.changes=function(){return new hb(l(this,"changes"),function(a){return function(b){return a.dispatcher.subscribe(function(a){return a.isInitial()?void 0:b(a)})}}(this))},b.prototype.withHandler=function(a){return new b(l(this,"withHandler",a),this.dispatcher.subscribe,a)},b.prototype.toProperty=function(){return this},b.prototype.toEventStream=function(){return new hb(l(this,"toEventStream"),function(a){return function(b){return a.dispatcher.subscribe(function(a){return a.isInitial()&&(a=a.toNext()),b(a)})}}(this))},b}(D),a.Property=ib;var o=[].slice;a.fromBinder=function(b,c){return null==c&&(c=d.id),new hb(l(a,"fromBinder",b,c),function(e){var f,g,h,i;return i=!1,f=!1,g=function(){return i?void 0:"undefined"!=typeof h&&null!==h?(h(),i=!0):f=!0},h=b(function(){var b,f,h,i,j,k;for(b=1<=arguments.length?o.call(arguments,0):[],i=c.apply(this,b),U(i)&&d.last(i)instanceof $||(i=[i]),h=a.more,j=0,k=i.length;k>j;j++)if(f=i[j],h=e(f=fb(f)),h===a.noMore||f.isEnd())return g(),h;return h}),f&&g(),g})},a.fromEventTarget=function(b,c,d){var e,f,g,h,i,j,k,l;return e=null!=(g=null!=(h=null!=(i=b.addEventListener)?i:b.addListener)?h:b.bind)?g:b.on,f=null!=(j=null!=(k=null!=(l=b.removeEventListener)?l:b.removeListener)?k:b.unbind)?j:b.off,n(a,"fromEventTarget",b,c,a.fromBinder(function(a){return e.call(b,c,a),function(){return f.call(b,c,a)}},d))},a.fromPromise=function(b,c){return n(a,"fromPromise",b,a.fromBinder(function(a){return b.then(a,function(b){return a(new Z(b))}),function(){return c&&"function"==typeof b.abort?b.abort():void 0}},function(a){return[a,bb()]}))},a.constant=function(b){return new ib(l(a,"constant",b),function(a){return a(db(b)),a(bb()),X})},a.never=function(){return new hb(l(a,"never"),function(a){return a(bb()),X})},a.once=function(b){return new hb(l(a,"once",b),function(a){return a(fb(b)),a(bb()),X})},a.fromArray=function(b){var c;return b.length?(c=0,new hb(l(a,"fromArray",b),function(d){var e,g,h;return h=!1,g=a.more,e=function(){var i;return g===a.noMore||h||(i=b[c++],g=d(fb(i)),g===a.noMore)?void 0:c===b.length?d(bb()):f.afterTransaction(e)},e(),function(){return h=!0}})):n(a,"fromArray",b,a.never())};var o=[].slice;a.combineAsArray=function(){var b,c,d,e,f,g,h;for(f=1<=arguments.length?o.call(arguments,0):[],1===f.length&&U(f[0])&&(f=f[0]),b=g=0,h=f.length;h>g;b=++g)e=f[b],V(e)||(f[b]=a.constant(e));return f.length?(d=function(){var a,b,d;for(d=[],a=0,b=f.length;b>a;a++)c=f[a],d.push(new i(c,!0));return d}(),n.apply(null,[a,"combineAsArray"].concat(o.call(f),[a.when(d,function(){var a;return a=1<=arguments.length?o.call(arguments,0):[]}).toProperty()]))):a.constant([])},a.onValues=function(){var b,c,d;return c=2<=arguments.length?o.call(arguments,0,d=arguments.length-1):(d=0,[]),b=arguments[d++],a.combineAsArray(c).onValues(b)},a.combineWith=function(){var b,c;return b=arguments[0],c=2<=arguments.length?o.call(arguments,1):[],n.apply(null,[a,"combineWith",b].concat(o.call(c),[a.combineAsArray(c).map(function(a){return b.apply(null,a)})]))},a.combineTemplate=function(b){var c,e,f,g,h,i,j,k,l,m;return j=[],m=[],i=function(a){return a[a.length-1]},l=function(a,b,c){return i(a)[b]=c},c=function(a,b){return function(c,d){return l(c,a,d[b])}},h=function(a,b){return function(c){return l(c,a,b)}},k=function(a){return U(a)?[]:{}},f=function(a,b){var d,e;return V(b)?(m.push(b),j.push(c(a,m.length-1))):b!==Object(b)||"function"==typeof b||b instanceof RegExp||b instanceof Date?j.push(h(a,b)):(e=function(a){return function(c){var d;return d=k(b),l(c,a,d),c.push(d)}},d=function(a){return a.pop()},j.push(e(a)),g(b),j.push(d))},g=function(a){return d.each(a,f)},g(b),e=function(a){var c,d,e,f,g;for(e=k(b),c=[e],f=0,g=j.length;g>f;f++)(d=j[f])(c,a);return e},n(a,"combineTemplate",b,a.combineAsArray(m).map(e))},a.Observable.prototype.combine=function(b,c){var d;return d=v(c),n(this,"combine",b,c,a.combineAsArray(this,b).map(function(a){return d(a[0],a[1])}))},a.Observable.prototype.decode=function(b){return n(this,"decode",b,this.combine(a.combineTemplate(b),function(a,b){return b[a]}))},a.Observable.prototype.withStateMachine=function(b,c){var d;return d=b,n(this,"withStateMachine",b,c,this.withHandler(function(b){var e,f,g,h,i,j,k;for(e=c(d,b),f=e[0],h=e[1],d=f,i=a.more,j=0,k=h.length;k>j;j++)if(g=h[j],i=this.push(g),i===a.noMore)return i;return i}))},a.Observable.prototype.skipDuplicates=function(a){return null==a&&(a=function(a,b){return a===b}),n(this,"skipDuplicates",this.withStateMachine(A,function(b,c){return c.hasValue()?c.isInitial()||b===A||!a(b.get(),c.value())?[new B(c.value()),[c]]:[b,[]]:[b,[c]]}))},a.Observable.prototype.awaiting=function(b){return n(this,"awaiting",b,a.groupSimultaneous(this,b).map(function(a){var b,c;return b=a[0],c=a[1],0===c.length}).toProperty(!1).skipDuplicates())},a.Observable.prototype.not=function(){return n(this,"not",this.map(function(a){return!a}))},a.Property.prototype.and=function(a){return n(this,"and",a,this.combine(a,function(a,b){return a&&b}))},a.Property.prototype.or=function(a){return n(this,"or",a,this.combine(a,function(a,b){return a||b}))},a.scheduler={setTimeout:function(a,b){return setTimeout(a,b)},setInterval:function(a,b){return setInterval(a,b)},clearInterval:function(a){return clearInterval(a)},now:function(){return(new Date).getTime()}},a.EventStream.prototype.bufferWithTime=function(a){return n(this,"bufferWithTime",a,this.bufferWithTimeOrCount(a,Number.MAX_VALUE))},a.EventStream.prototype.bufferWithCount=function(a){return n(this,"bufferWithCount",a,this.bufferWithTimeOrCount(void 0,a))},a.EventStream.prototype.bufferWithTimeOrCount=function(a,b){var c;return c=function(c){return c.values.length===b?c.flush():void 0!==a?c.schedule():void 0},n(this,"bufferWithTimeOrCount",a,b,this.buffer(a,c,c))},a.EventStream.prototype.buffer=function(b,c,e){var f,g,h;return null==c&&(c=X),null==e&&(e=X),f={scheduled:!1,end:void 0,values:[],flush:function(){var b;if(this.scheduled=!1,this.values.length>0){if(b=this.push(eb(this.values)),this.values=[],null!=this.end)return this.push(this.end);if(b!==a.noMore)return e(this)}else if(null!=this.end)return this.push(this.end)},schedule:function(){return this.scheduled?void 0:(this.scheduled=!0,b(function(a){return function(){return a.flush()}}(this)))}},h=a.more,d.isFunction(b)||(g=b,b=function(b){return a.scheduler.setTimeout(b,g)}),n(this,"buffer",this.withHandler(function(a){return f.push=function(a){return function(b){return a.push(b)}}(this),a.isError()?h=this.push(a):a.isEnd()?(f.end=a,f.scheduled||f.flush()):(f.values.push(a.value()),c(f)),h}))};var o=[].slice;a.Observable.prototype.filter=function(){var b,c;return c=arguments[0],b=2<=arguments.length?o.call(arguments,1):[],p(this,c,b,function(b){return n(this,"filter",b,this.withHandler(function(c){return c.filter(b)?this.push(c):a.more}))})},a.EventStream.prototype.concat=function(a){var b;return b=this,new hb(l(b,"concat",a),function(c){var d,e;return e=X,d=b.dispatcher.subscribe(function(b){return b.isEnd()?e=a.dispatcher.subscribe(c):c(b)}),function(){return d(),e()}})};var kb,lb,mb;a.Observable.prototype.flatMap=function(){return kb(this,mb(arguments))},a.Observable.prototype.flatMapFirst=function(){return kb(this,mb(arguments),!0)},kb=function(b,c,e,f){var g,h,i;return i=[b],g=[],h=new hb(l(b,"flatMap"+(e?"First":""),c),function(h){var i,j,k,l,m;return k=new G,l=[],m=function(b){var e;return e=lb(c(b.value())),g.push(e),k.add(function(b,c){return e.dispatcher.subscribe(function(f){var k;return f.isEnd()?(d.remove(e,g),j(),i(c),a.noMore):(f instanceof _&&(f=f.toNext()),k=h(f),k===a.noMore&&b(),k)})})},j=function(){var a;return a=l.shift(),a?m(a):void 0},i=function(a){return a(),k.empty()?h(bb()):void 0},k.add(function(c,d){return b.dispatcher.subscribe(function(b){return b.isEnd()?i(d):b.isError()?h(b):e&&k.count()>1?a.more:k.unsubscribed?a.noMore:f&&k.count()>f?l.push(b):m(b)})}),k.unsubscribe}),h.internalDeps=function(){return g.length?i.concat(g):i},h},mb=function(a){return 1===a.length&&V(a[0])?d.always(a[0]):s(a)},lb=function(b){return V(b)?b:a.once(b)};var o=[].slice;a.Observable.prototype.flatMapWithConcurrencyLimit=function(){var a,b;return b=arguments[0],a=2<=arguments.length?o.call(arguments,1):[],n.apply(null,[this,"flatMapWithConcurrencyLimit",b].concat(o.call(a),[kb(this,mb(a),!1,b)]))};var o=[].slice;a.Observable.prototype.flatMapConcat=function(){return n.apply(null,[this,"flatMapConcat"].concat(o.call(arguments),[this.flatMapWithConcurrencyLimit.apply(this,[1].concat(o.call(arguments)))]))},a.Observable.prototype.bufferingThrottle=function(b){return n(this,"bufferingThrottle",b,this.flatMapConcat(function(c){return a.once(c).concat(a.later(b).filter(!1))}))},a.Property.prototype.bufferingThrottle=function(){return a.Observable.prototype.bufferingThrottle.apply(this,arguments).toProperty()};var nb,I=function(a,b){return function(){return a.apply(b,arguments)}},e={}.hasOwnProperty,j=function(a,b){function c(){this.constructor=a}for(var d in b)e.call(b,d)&&(a[d]=b[d]);return c.prototype=b.prototype,a.prototype=new c,a.__super__=b.prototype,a};nb=function(b){function c(){this.guardedSink=I(this.guardedSink,this),this.subscribeAll=I(this.subscribeAll,this),this.unsubAll=I(this.unsubAll,this),this.sink=void 0,this.subscriptions=[],this.ended=!1,c.__super__.constructor.call(this,l(a,"Bus"),this.subscribeAll)}return j(c,b),c.prototype.unsubAll=function(){var a,b,c,d;for(d=this.subscriptions,b=0,c=d.length;c>b;b++)a=d[b],"function"==typeof a.unsub&&a.unsub();return void 0},c.prototype.subscribeAll=function(a){var b,c,d,e;for(this.sink=a,e=S(this.subscriptions),c=0,d=e.length;d>c;c++)b=e[c],this.subscribeInput(b);return this.unsubAll},c.prototype.guardedSink=function(b){return function(c){return function(d){return d.isEnd()?(c.unsubscribeInput(b),a.noMore):c.sink(d)}}(this)},c.prototype.subscribeInput=function(a){return a.unsub=a.input.dispatcher.subscribe(this.guardedSink(a.input))},c.prototype.unsubscribeInput=function(a){var b,c,d,e,f;for(f=this.subscriptions,b=d=0,e=f.length;e>d;b=++d)if(c=f[b],c.input===a)return"function"==typeof c.unsub&&c.unsub(),void this.subscriptions.splice(b,1)},c.prototype.plug=function(a){var b;if(!this.ended)return b={input:a},this.subscriptions.push(b),null!=this.sink&&this.subscribeInput(b),function(b){return function(){return b.unsubscribeInput(a)}}(this)},c.prototype.end=function(){return this.ended=!0,this.unsubAll(),"function"==typeof this.sink?this.sink(bb()):void 0},c.prototype.push=function(a){return"function"==typeof this.sink?this.sink(eb(a)):void 0},c.prototype.error=function(a){return"function"==typeof this.sink?this.sink(new Z(a)):void 0},c}(hb),a.Bus=nb;var ob,o=[].slice;ob=function(b,c){return z(function(){var d,e,f;return e=arguments[0],d=2<=arguments.length?o.call(arguments,1):[],f=u(c,[function(a,b){return e.apply(null,o.call(a).concat([b]))}]),n.apply(null,[a,b,e].concat(o.call(d),[a.combineAsArray(d).flatMap(f)]))})},a.fromCallback=ob("fromCallback",function(){var b,c;return c=arguments[0],b=2<=arguments.length?o.call(arguments,1):[],a.fromBinder(function(a){return r(c,b)(a),X},function(a){return[a,bb()]})}),a.fromNodeCallback=ob("fromNodeCallback",function(){var b,c;return c=arguments[0],b=2<=arguments.length?o.call(arguments,1):[],a.fromBinder(function(a){return r(c,b)(a),X},function(a,b){return a?[new Z(a),bb()]:[b,bb()]})});var pb;pb=function(b,c){var d;return d=new hb(l(b,"justInitValue"),function(c){var e,g;return g=void 0,e=b.dispatcher.subscribe(function(b){return b.isEnd()||(g=b),a.noMore}),f.whenDoneWith(d,function(){return null!=g&&c(g),c(bb())}),e}),d.concat(c).toProperty()},a.Observable.prototype.mapEnd=function(){var b;return b=s(arguments),n(this,"mapEnd",b,this.withHandler(function(c){return c.isEnd()?(this.push(eb(b(c))),this.push(bb()),a.noMore):this.push(c)
}))},a.Observable.prototype.skipErrors=function(){return n(this,"skipErrors",this.withHandler(function(b){return b.isError()?a.more:this.push(b)}))},a.EventStream.prototype.takeUntil=function(b){var c;return c={},n(this,"takeUntil",b,a.groupSimultaneous(this.mapEnd(c),b.skipErrors()).withHandler(function(d){var e,f,g,h,i,j;if(d.hasValue()){if(j=d.value(),e=j[0],b=j[1],b.length)return this.push(bb());for(f=a.more,h=0,i=e.length;i>h;h++)g=e[h],f=this.push(g===c?bb():eb(g));return f}return this.push(d)}))},a.Property.prototype.takeUntil=function(a){var b;return b=this.changes().takeUntil(a),n(this,"takeUntil",a,pb(this,b))},a.Observable.prototype.flatMapLatest=function(){var a,b;return a=mb(arguments),b=this.toEventStream(),n(this,"flatMapLatest",a,b.flatMap(function(c){return lb(a(c)).takeUntil(b)}))};var o=[].slice;a.fromPoll=function(b,c){return n(a,"fromPoll",b,c,a.fromBinder(function(c){var d;return d=a.scheduler.setInterval(c,b),function(){return a.scheduler.clearInterval(d)}},c))},a.later=function(b,c){return n(a,"later",b,c,a.fromPoll(b,function(){return[c,bb()]}))},a.sequentially=function(b,c){var d;return d=0,n(a,"sequentially",b,c,a.fromPoll(b,function(){var a;return a=c[d++],d<c.length?a:d===c.length?[a,bb()]:bb()}))},a.repeatedly=function(b,c){var d;return d=0,n(a,"repeatedly",b,c,a.fromPoll(b,function(){return c[d++%c.length]}))},a.interval=function(b,c){return null==c&&(c={}),n(a,"interval",b,c,a.fromPoll(b,function(){return eb(c)}))},a.EventStream.prototype.delay=function(b){return n(this,"delay",b,this.flatMap(function(c){return a.later(b,c)}))},a.Property.prototype.delay=function(a){return this.delayChanges("delay",a,function(b){return b.delay(a)})},a.Property.prototype.delayChanges=function(){var a,b,c;return a=2<=arguments.length?o.call(arguments,0,c=arguments.length-1):(c=0,[]),b=arguments[c++],n.apply(null,[this].concat(o.call(a),[pb(this,b(this.changes()))]))},a.EventStream.prototype.debounce=function(b){return n(this,"debounce",b,this.flatMapLatest(function(c){return a.later(b,c)}))},a.Property.prototype.debounce=function(a){return this.delayChanges("debounce",a,function(b){return b.debounce(a)})},a.EventStream.prototype.debounceImmediate=function(b){return n(this,"debounceImmediate",b,this.flatMapFirst(function(c){return a.once(c).concat(a.later(b).filter(!1))}))},a.Observable.prototype.scan=function(b,c){var d,e,g;return c=v(c),d=C(b),g=function(b){return function(g){var h,i,j,k;return h=!1,k=X,i=a.more,j=function(){return h?void 0:d.forEach(function(b){return h=!0,i=g(new _(function(){return b})),i===a.noMore?(k(),k=X):void 0})},k=b.dispatcher.subscribe(function(b){var e,f;return b.hasValue()?h&&b.isInitial()?a.more:(b.isInitial()||j(),h=!0,f=d.getOrElse(void 0),e=c(f,b.value()),d=new B(e),g(b.apply(function(){return e}))):(b.isEnd()&&(i=j()),i!==a.noMore?g(b):void 0)}),f.whenDoneWith(e,j),k}}(this),e=new ib(l(this,"scan",b,c),g)},a.Observable.prototype.diff=function(a,b){return b=v(b),n(this,"diff",a,b,this.scan([a],function(a,c){return[c,b(a[0],c)]}).filter(function(a){return 2===a.length}).map(function(a){return a[1]}))},a.Observable.prototype.doAction=function(){var a;return a=s(arguments),n(this,"doAction",a,this.withHandler(function(b){return b.hasValue()&&a(b.value()),this.push(b)}))};var o=[].slice;a.Observable.prototype.endOnError=function(){var a,b;return b=arguments[0],a=2<=arguments.length?o.call(arguments,1):[],null==b&&(b=!0),p(this,b,a,function(a){return n(this,"endOnError",this.withHandler(function(b){return b.isError()&&a(b.error)?(this.push(b),this.push(bb())):this.push(b)}))})},a.Observable.prototype.mapError=function(){var a;return a=s(arguments),n(this,"mapError",a,this.withHandler(function(b){return this.push(b.isError()?eb(a(b.error)):b)}))},a.Observable.prototype.flatMapError=function(b){return n(this,"flatMapError",b,this.mapError(function(a){return new Z(a)}).flatMap(function(c){return c instanceof Z?b(c.error):a.once(c)}))};var o=[].slice;a.EventStream.prototype.sampledBy=function(a,b){return n(this,"sampledBy",a,b,this.toProperty().sampledBy(a,b))},a.Property.prototype.sampledBy=function(b,c){var d,e,f,g,h;return null!=c?c=v(c):(d=!0,c=function(a){return a.value()}),h=new i(this,!1,d),f=new i(b,!0,d),g=a.when([h,f],c),e=b instanceof ib?g.toProperty():g,n(this,"sampledBy",b,c,e)},a.Property.prototype.sample=function(b){return n(this,"sample",b,this.sampledBy(a.interval(b,{})))},a.Observable.prototype.map=function(){var a,b;return b=arguments[0],a=2<=arguments.length?o.call(arguments,1):[],b instanceof ib?b.sampledBy(this,T):p(this,b,a,function(a){return n(this,"map",a,this.withHandler(function(b){return this.push(b.fmap(a))}))})},a.Observable.prototype.fold=function(a,b){return n(this,"fold",a,b,this.scan(a,b).sampledBy(this.filter(!1).mapEnd().toProperty()))},D.prototype.reduce=D.prototype.fold;var o=[].slice;a.EventStream.prototype.merge=function(b){var c;return c=this,n(c,"merge",b,a.mergeAll(this,b))},a.mergeAll=function(){var b;return b=1<=arguments.length?o.call(arguments,0):[],U(b[0])&&(b=b[0]),b.length?new hb(l.apply(null,[a,"mergeAll"].concat(o.call(b))),function(c){var e,f,g;return e=0,g=function(d){return function(f){return d.dispatcher.subscribe(function(d){var g;return d.isEnd()?(e++,e===b.length?c(bb()):a.more):(g=c(d),g===a.noMore&&f(),g)})}},f=d.map(g,b),H.apply(null,f)}):a.never()},a.Observable.prototype.take=function(b){return 0>=b?a.never():n(this,"take",b,this.withHandler(function(c){return c.hasValue()?(b--,b>0?this.push(c):(0===b&&this.push(c),this.push(bb()),a.noMore)):this.push(c)}))},a.EventStream.prototype.holdWhen=function(b){var c,e,f;return f=b.startWith(!1),e=f.filter(function(a){return!a}),c=f.filter(d.id),n(this,"holdWhen",b,this.filter(!1).merge(f.flatMapConcat(function(b){return function(d){return d?b.scan([],function(a,b){return a.concat(b)}).sampledBy(e).take(1).flatMap(a.fromArray):b.takeUntil(c)}}(this))))},a.$={},a.$.asEventStream=function(b,c,d){return isFunction(c)&&(d=c,c=void 0),n(this.selector||this,"asEventStream",b,a.fromBinder(function(a){return function(d){return a.on(b,c,d),function(){return a.off(b,c,d)}}}(this),d))},"object"==typeof jQuery?jQuery.fn.asEventStream=a.$.asEventStream:"object"==typeof Zepto&&(Zepto.fn.asEventStream=a.$.asEventStream);var o=[].slice;a.Observable.prototype.log=function(){var a;return a=1<=arguments.length?o.call(arguments,0):[],this.subscribe(function(b){return"undefined"!=typeof console&&null!==console&&"function"==typeof console.log?console.log.apply(console,o.call(a).concat([b.log()])):void 0}),this},a.retry=function(c){var e,f,g,h,i,j;if(!d.isFunction(c.source))throw new b("'source' option has to be a function");return j=c.source,h=c.retries||0,g=c.maxRetries||h,e=c.delay||function(){return 0},f=c.isRetryable||function(){return!0},i=function(b){var c,d;return d={source:j,retries:h-1,maxRetries:g,delay:e,isRetryable:f},c=function(){return a.retry(d)},a.later(e(b)).filter(!1).concat(a.once().flatMap(c))},n(a,"retry",c,j().flatMapError(function(b){return f(b)&&h>0?i({error:b,retriesDone:g-h}):a.once(new Z(b))}))},a.Observable.prototype.skip=function(b){return n(this,"skip",b,this.withHandler(function(c){return c.hasValue()&&b>0?(b--,a.more):this.push(c)}))},a.EventStream.prototype.skipUntil=function(a){var b;return b=a.take(1).map(!0).toProperty(!1),n(this,"skipUntil",a,this.filter(b))};var o=[].slice;a.EventStream.prototype.skipWhile=function(){var b,c,d;return c=arguments[0],b=2<=arguments.length?o.call(arguments,1):[],d=!1,p(this,c,b,function(b){return n(this,"skipWhile",b,this.withHandler(function(c){return!d&&c.hasValue()&&b(c.value())?a.more:(c.hasValue()&&(d=!0),this.push(c))}))})},a.Observable.prototype.slidingWindow=function(a,b){return null==b&&(b=0),n(this,"slidingWindow",a,b,this.scan([],function(b,c){return b.concat([c]).slice(-a)}).filter(function(a){return a.length>=b}))};var F,qb;a.spy=function(a){return qb.push(a)},qb=[],F=function(a){var b,c,d;if(qb.length&&!F.running)try{for(F.running=!0,c=0,d=qb.length;d>c;c++)(b=qb[c])(a)}finally{delete F.running}return void 0},a.Property.prototype.startWith=function(a){return n(this,"startWith",a,this.scan(a,function(a,b){return b}))};var o=[].slice;a.Observable.prototype.takeWhile=function(){var b,c;return c=arguments[0],b=2<=arguments.length?o.call(arguments,1):[],p(this,c,b,function(b){return n(this,"takeWhile",b,this.withHandler(function(c){return c.filter(b)?this.push(c):(this.push(bb()),a.noMore)}))})},a.EventStream.prototype.throttle=function(a){return n(this,"throttle",a,this.bufferWithTime(a).map(function(a){return a[a.length-1]}))},a.Property.prototype.throttle=function(a){return this.delayChanges("throttle",a,function(b){return b.throttle(a)})};var o=[].slice;a.update=function(){var b,c,d,e;for(c=arguments[0],e=2<=arguments.length?o.call(arguments,1):[],d=function(a){return function(){var b;return b=1<=arguments.length?o.call(arguments,0):[],function(c){return a.apply(null,[c].concat(b))}}},b=e.length-1;b>0;)e[b]instanceof Function||(e[b]=function(a){return function(){return a}}(e[b])),e[b]=d(e[b]),b-=2;return n.apply(null,[a,"update",c].concat(o.call(e),[a.when.apply(a,e).scan(c,function(a,b){return b(a)})]))};var o=[].slice;a.zipAsArray=function(){var b;return b=1<=arguments.length?o.call(arguments,0):[],U(b[0])&&(b=b[0]),n.apply(null,[a,"zipAsArray"].concat(o.call(b),[a.zipWith(b,function(){var a;return a=1<=arguments.length?o.call(arguments,0):[]})]))},a.zipWith=function(){var b,c,e;return b=arguments[0],c=2<=arguments.length?o.call(arguments,1):[],d.isFunction(b)||(e=[b,c[0]],c=e[0],b=e[1]),c=d.map(function(a){return a.toEventStream()},c),n.apply(null,[a,"zipWith",b].concat(o.call(c),[a.when(c,b)]))},a.Observable.prototype.zip=function(b,c){return null==c&&(c=Array),n(this,"zip",b,a.zipWith([this,b],c))},"undefined"!=typeof define&&null!==define&&null!=define.amd?(define([],function(){return a}),this.Bacon=a):"undefined"!=typeof module&&null!==module&&null!=module.exports?(module.exports=a,a.Bacon=a):this.Bacon=a}).call(this);